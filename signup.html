<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>Dreamyo - 회원가입</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="screen">

    <!-- 뒤로가기 (로그인으로) -->
    <a href="login.html" class="back">←</a>

    <div class="center" style="margin-bottom: 32px;">
      <div class="logo">Dreamyo</div>
      <p class="subtitle" style="margin-top: 8px;">
        꿈을 꾸는 아이들에게, 드림요.
      </p>
    </div>

    <!-- ⭐⭐ 여기가 회원가입 폼 ⭐⭐ -->
    <form id="signup-form">
      <div class="form-group">
        <label class="form-label" for="name">이름</label>
        <input
          id="signup-name"
          type="text"
          class="form-input"
          placeholder="이름을 입력해주세요"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label" for="email">이메일</label>
        <input
          id="signup-email"
          type="email"
          class="form-input"
          placeholder="이메일을 입력해주세요"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label" for="password">비밀번호</label>
        <input
          id="signup-password"
          type="password"
          class="form-input"
          placeholder="비밀번호를 입력해주세요"
          required
        />
      </div>

      <div class="form-group">
        <label class="form-label" for="password-confirm">비밀번호 확인</label>
        <input
          id="signup-password-confirm"
          type="password"
          class="form-input"
          placeholder="비밀번호를 한 번 더 입력해주세요"
          required
        />
      </div>

      <button type="submit" class="btn-primary">회원가입</button>
    </form>

    <!-- Firebase CDN -->
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.10/firebase-firestore-compat.js"></script>

    <!-- 네가 만든 init 파일 -->
    <script src="firebase-init.js"></script>

    <!-- ⭐⭐ Firebase 회원가입 기능 ⭐⭐ -->
    <script>
      const signupForm = document.getElementById("signup-form");

      signupForm.addEventListener("submit", function (e) {
        e.preventDefault();

        const name = document.getElementById("signup-name").value.trim();
        const email = document.getElementById("signup-email").value.trim();
        const password = document.getElementById("signup-password").value.trim();
        const passwordConfirm = document.getElementById("signup-password-confirm").value.trim();

        if (password !== passwordConfirm) {
          alert("비밀번호가 일치하지 않습니다.");
          return;
        }

        // Firebase Auth 회원가입
        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            const user = userCredential.user;

            // Firestore에 사용자 정보 저장 (선택)
            db.collection("users").doc(user.uid).set({
              name: name,
              email: email,
              createdAt: new Date()
            });

            alert("회원가입이 완료되었습니다! 이제 로그인해 주세요 😊");
            window.location.href = "login.html";
          })
          .catch((error) => {
            console.error(error);
            alert("회원가입 오류: " + error.message);
          });
      });
    </script>

  </div>
</body>
</html>
